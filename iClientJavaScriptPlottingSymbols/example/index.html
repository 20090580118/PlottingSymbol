<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>标绘扩展符号</title>
    <style type="text/css">
        body{
            margin: 0;
            overflow: hidden;
            background: #fff;
        }
        #map{
            position: relative;
            height: 520px;
            border:1px solid #3473b7;
        }
        #toolbar{
            position: relative;
            height: 40px;
            padding-top:5;
        }
		.butt:hover
		{ 
			background-color: #BFEFFF;
		}
    </style>
    <script src='../libs/SuperMap.Include.js'></script>
    <script src='../iClientJavaScriptPlottingSymbols-min.js'></script>
    <!--<script src='../iClientJavaScriptPlottingSymbols/PlottingSymbols.Include.js'></script>-->
    <script type="text/javascript">
        var map, layer, vectorLayer,
                drawGeoCircle,
                drawGeoCurveFlag,
                drawGeoDiagonalArrow,
                drawGeoDoveTailDiagonalArrow,
                drawGeoDoubleArrow,
                drawGeoRectFlag,
                drawGeoStraightArrow,
                drawGeoDoveTailStraightArrow,
                drawGeoTriangleFlag,
                plottingEdit;

        function init(){
            map = new SuperMap.Map("map",{controls: [
                new SuperMap.Control.LayerSwitcher(),
                new SuperMap.Control.ScaleLine(),
                new SuperMap.Control.Zoom(),
                new SuperMap.Control.Navigation({
                    dragPanOptions: {
                        enableKinetic: true
                    }
                })
            ]});

            //新建一个矢量图层
            vectorLayer = new SuperMap.Layer.Vector("PlottingSymbolLayer");
            //设置图层样式
            vectorLayer.style = {
                fillColor: "#66cccc",
                fillOpacity: 0.4,
                strokeColor: "#66cccc",
                strokeOpacity: 1,
                strokeWidth: 2
            };

            //标绘扩展符号绘制控件
            drawGeoCircle = new SuperMap.Control.DrawFeature(vectorLayer, SuperMap.Handler.CircleEx);
            drawGeoCurveFlag = new SuperMap.Control.DrawFeature(vectorLayer, SuperMap.Handler.CurveFlag);
            drawGeoDiagonalArrow = new SuperMap.Control.DrawFeature(vectorLayer, SuperMap.Handler.DiagonalArrow);
            drawGeoDoveTailDiagonalArrow = new SuperMap.Control.DrawFeature(vectorLayer, SuperMap.Handler.DoveTailDiagonalArrow);
            drawGeoDoubleArrow = new SuperMap.Control.DrawFeature(vectorLayer, SuperMap.Handler.DoubleArrow);
            drawGeoRectFlag = new SuperMap.Control.DrawFeature(vectorLayer, SuperMap.Handler.RectFlag);
            drawGeoStraightArrow = new SuperMap.Control.DrawFeature(vectorLayer, SuperMap.Handler.StraightArrow);
           drawGeoDoveTailStraightArrow = new SuperMap.Control.DrawFeature(vectorLayer, SuperMap.Handler.DoveTailStraightArrow);
            drawGeoTriangleFlag = new SuperMap.Control.DrawFeature(vectorLayer, SuperMap.Handler.TriangleFlag);

            //新建标绘扩展符号编辑控件
            plottingEdit = new SuperMap.Control.PlottingEdit(vectorLayer);
            //修改控制点样式
            plottingEdit.controlPointsStyle = {
                fillColor: "blue",
                fillOpacity: 0.2,
                strokeColor: "blue"
            };

            //将控件添加到map中
            map.addControls([
                drawGeoCircle,
                drawGeoCurveFlag,
                drawGeoDiagonalArrow,
               drawGeoDoveTailDiagonalArrow,
                drawGeoDoubleArrow,
                drawGeoRectFlag,
                drawGeoStraightArrow,
                drawGeoDoveTailStraightArrow,
                drawGeoTriangleFlag,
                plottingEdit
            ]);

            //用超图云地图作底图
            layer = new SuperMap.Layer.CloudLayer();
            map.addLayers([layer, vectorLayer]);
            map.setCenter(new SuperMap.LonLat(11339634.286396, 4588716.5813769), 4);
        }

        //关闭所有控件
        function allDeActivate(){
            drawGeoCircle.deactivate();
            drawGeoCurveFlag.deactivate();
            drawGeoDiagonalArrow.deactivate();
             drawGeoDoveTailDiagonalArrow.deactivate();
            drawGeoDoubleArrow.deactivate();
            drawGeoRectFlag.deactivate();
            drawGeoStraightArrow.deactivate();
            drawGeoDoveTailStraightArrow.deactivate();
            drawGeoTriangleFlag.deactivate();
            plottingEdit.deactivate();
        }

        //绘制圆
        function drawCircle(){
            allDeActivate();
            drawGeoCircle.activate();
        }
        //绘制曲线旗标
        function drawCurveFlag(){
            allDeActivate();
            drawGeoCurveFlag.activate();
        }
        //绘制斜箭头
        function drawDiagonalArrow(){
            allDeActivate();
            drawGeoDiagonalArrow.activate();
        }
          //绘制燕尾尾巴斜箭头
        function drawDoveTailDiagonalArrow(){
            allDeActivate();
            drawGeoDoveTailDiagonalArrow.activate();
        }

        //绘制双箭头
        function drawDoubleArrow(){
            allDeActivate();
            drawGeoDoubleArrow.activate();
        }
        //绘制直角旗标
        function drawRectFlag(){
            allDeActivate();
            drawGeoRectFlag.activate();
        }
        //绘制直箭头
        function drawStraightArrow(){
            allDeActivate();
            drawGeoStraightArrow.activate();
        }
        //绘制燕尾尾巴直箭头
        function drawDoveTailStraightArrow(){
            allDeActivate();
            drawGeoDoveTailStraightArrow.activate();
        }
        //绘制三角旗标
        function drawTriangleFlag(){
            allDeActivate();
            drawGeoTriangleFlag.activate();
        }

        //编辑符号
        function edit(){
            allDeActivate();
            plottingEdit.activate();
        }

        //清除图层
        function clearLabels() {
            allDeActivate();
            vectorLayer.removeAllFeatures();
        }
    </script>
</head>
<body onload="init()">
<div id="toolbar" style= "text-align: center">
    <img src="img/drawCircle.png" class="butt" title="圆"  onclick = "drawCircle()"/>
    <img src="img/drawCurveFlag.png" class="butt" title="曲线旗标"  onclick = "drawCurveFlag()"/>
    <img src="img/drawDiagonalArrow.png" class="butt" title="斜箭头"  onclick = "drawDiagonalArrow()"/>
    <img src="img/drawDoveTailDiagonalArrow.png" class="butt" title="燕尾斜箭头"  onclick = "drawDoveTailDiagonalArrow()"/>
    <img src="img/drawDoubleArrow.png" class="butt" title="双箭头"  onclick = "drawDoubleArrow()"/>
    <img src="img/drawRectFlag.png" class="butt" title="直角旗标"  onclick = "drawRectFlag()"/>
    <img src="img/drawStraightArrow.png" class="butt" title="直箭头"  onclick = "drawStraightArrow()"/>
    <img src="img/drawDoveTailStraightArrow.png" class="butt" title="燕尾直箭头"  onclick = "drawDoveTailStraightArrow()"/>
    <img src="img/drawTriangleFlag.png" class="butt" title="三角旗标"  onclick = "drawTriangleFlag()"/>
    <img src="img/updateEntity.png" class="butt" title="编辑符号"  onclick = "edit()"/>
    <img src="img/clear.png" class="butt" title="清除"  onclick = "clearLabels()"/>
</div>
<div id="map"></div>
</body>
</html>